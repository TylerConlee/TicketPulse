{{define "content"}}
<h1>Profile</h1>

<form method="POST" action="/profile/add-tag">
    <label for="tag">Tag:</label>
    <input type="text" name="tag" id="tag" required><br>

    <label for="slack_channel">Slack Channel:</label>
    <select name="slack_channel" id="slack_channel" required>
        {{range .SlackChannels}}
        <option value="{{.ID}}">{{.Name}}</option>
        {{end}}
    </select><br>

    <label for="alert_type">Alert Type:</label>
    <select name="alert_type" id="alert_type" required>
        <option value="new_ticket">New Ticket</option>
        <option value="sla_deadline">SLA Deadline</option>
        <option value="ticket_update">Ticket Update</option>
    </select><br>

    <button type="submit">Add Tag Alert</button>
</form>

<h2>Configured Alerts</h2>
<table border="1">
    <tr>
        <th>Tag</th>
        <th>Slack Channel</th>
        <th>Alert Type</th>
        <th>Action</th>
    </tr>
    {{range .TagAlerts}}
    <tr>
        <td>{{.Tag}}</td>
        <td>{{.SlackChannelID}}</td>
        <td>{{.AlertType}}</td>
        <td>
            <form method="POST" action="/profile/delete-tag/{{.ID}}" onsubmit="return confirm('Are you sure you want to delete this alert?');">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    {{end}}
</table>
{{end}}
